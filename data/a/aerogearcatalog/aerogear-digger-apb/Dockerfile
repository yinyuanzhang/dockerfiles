FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.version"="0.1.0"
LABEL "com.redhat.apb.spec"=\
"dmVyc2lvbjogMS4wCm5hbWU6IGFlcm9nZWFyLWRpZ2dlci1hcGIKZGVzY3JpcHRpb246IE1vYmls\
ZSBDSXxDRCBpbnRlZ3JhdGVzIHdpdGggSmVua2lucyBQaXBlbGluZXMgdG8gdGVzdCBhbmQgYnVp\
bGQgeW91ciBtb2JpbGUgYmluYXJpZXMuCmJpbmRhYmxlOiBGYWxzZQphc3luYzogb3B0aW9uYWwK\
dGFnczoKICAtIG1vYmlsZS1zZXJ2aWNlCm1ldGFkYXRhOgogIGRpc3BsYXlOYW1lOiBNb2JpbGUg\
Q0l8Q0QKICBsb25nRGVzY3JpcHRpb246ICJUbyB1c2UgdGhlIE1vYmlsZSBDSXxDRCBzZXJ2aWNl\
IHlvdSBtdXN0IGZpcnN0IGFncmVlIHRvIHRoZSBBbmRyb2lkIFNESyBMaWNlbnNlIEFncmVlbWVu\
dCwgd2hpY2ggY2FuIGJlIHJlYWQgYXQgdGhlIGZvbGxvd2luZyBVUkw6IGh0dHBzOi8vZGV2ZWxv\
cGVyLmFuZHJvaWQuY29tL3N0dWRpby90ZXJtcy5odG1sLlxuIElmIHRoZSBib3ggaXMgbm90IGNo\
ZWNrZWQgdGhlIGluc3RhbGxlciB3aWxsIHRha2Ugbm8gYWN0aW9uLiIKICBzZXJ2aWNlTmFtZTog\
YWVyb2dlYXItZGlnZ2VyCiAgaW1hZ2VVcmw6ICJodHRwOi8vZGVzaWduLmpib3NzLm9yZy9hZXJv\
Z2VhcmRpZ2dlci9sb2dvL2ZpbmFsL3BuZy9hZXJvZ2VhcmRpZ2dlcl9pY29uXzI1NnB4LnBuZyIK\
ICBkb2N1bWVudGF0aW9uVXJsOiAiaHR0cHM6Ly9kb2NzLmFlcm9nZWFyLm9yZy9leHRlcm5hbC9h\
cGIvbW9iaWxlY2ljZC5odG1sIgogIHByb3ZpZGVyRGlzcGxheU5hbWU6ICJSZWQgSGF0LCBJbmMu\
IgpwbGFuczoKICAtIG5hbWU6IGRlZmF1bHQKICAgIGRlc2NyaXB0aW9uOiBEZWZhdWx0IHBsYW4K\
ICAgIGZyZWU6IFRydWUKICAgIG1ldGFkYXRhOiB7fQogICAgcGFyYW1ldGVyczoKICAgIC0gbmFt\
ZTogQU5EUk9JRF9MSUNFTlNFX0FHUkVFTUVOVAogICAgICBkZWZhdWx0OiAiIgogICAgICBwYXR0\
ZXJuOiBeeWVzJAogICAgICB0eXBlOiBzdHJpbmcKICAgICAgZGVzY3JpcHRpb246ICJUeXBlICd5\
ZXMnIGFib3ZlIHRvIGFjY2VwdCB0aGUgQW5kcm9pZCBTREsgTGljZW5zZSBBZ3JlZW1lbnQuIGh0\
dHBzOi8vZGV2ZWxvcGVyLmFuZHJvaWQuY29tL3N0dWRpby90ZXJtcy5odG1sIgogICAgICB0aXRs\
ZTogQW5kcm9pZCBTREsgTGljZW5zZSBBZ3JlZW1lbnQKICAgICAgcmVxdWlyZWQ6IFRydWUKICAg\
ICAgZGlzcGxheV9ncm91cDogQW5kcm9pZCBTREsKICAgIC0gbmFtZTogQU5EUk9JRF9TREtfQ09O\
RklHCiAgICAgIGRlZmF1bHQ6IHwKICAgICAgICBbYmFzZV0KICAgICAgICB0b29scwogICAgICAg\
IHBsYXRmb3JtLXRvb2xzCiAKICAgICAgICBbcGxhdGZvcm1zXQogICAgICAgIGFuZHJvaWQtMjcK\
ICAgICAgICBhbmRyb2lkLTI2CiAgICAgICAgYW5kcm9pZC0yNQogICAgICAgICAKICAgICAgICBb\
YnVpbGQtdG9vbHNdCiAgICAgICAgMjcuMC4zCiAgICAgICAgMjcuMC4yCiAgICAgICAgMjcuMC4x\
CiAgICAgICAgMjYuMC4yCiAgICAgICAgMjYuMC4xCiAgICAgICAgMjYuMC4wCiAgICAgICAgMjUu\
MC4zCiAgICAgICAgMjUuMC4yCiAgICAgICAgIAogICAgICAgIFtleHRyYXM6Z29vZ2xlXQogICAg\
ICAgIGdvb2dsZV9wbGF5X3NlcnZpY2VzCiAgICAgICAgbTJyZXBvc2l0b3J5CiAgICAgICAgIAog\
ICAgICAgIFtleHRyYXM6YW5kcm9pZF0KICAgICAgICBtMnJlcG9zaXRvcnkKICAgICAgICAgCiAg\
ICAgICAgW2V4dHJhczptMnJlcG9zaXRvcnk6Y29tOmFuZHJvaWQ6c3VwcG9ydDpjb25zdHJhaW50\
OmNvbnN0cmFpbnQtbGF5b3V0XQogICAgICAgIDEuMC4wCiAgICAgICAgMS4wLjEKICAgICAgICAx\
LjAuMgogICAgICAgICAKICAgICAgICBbZXh0cmFzOm0ycmVwb3NpdG9yeTpjb206YW5kcm9pZDpz\
dXBwb3J0OmNvbnN0cmFpbnQ6Y29uc3RyYWludC1sYXlvdXQtc29sdmVyXQogICAgICAgIDEuMC4w\
CiAgICAgICAgMS4wLjIKICAgICAgICAgCiAgICAgICAgW2tleXN0b3JlXQogICAgICAgIGFsaWFz\
PUFuZHJvaWREZWJ1Z0tleQogICAgICAgIG5hbWU9QUcKICAgICAgICB1bml0PUFlcm9HZWFyCiAg\
ICAgICAgb3JnPVJlZEhhdAogICAgICAgIGxvYz1XYXRlcmZvcmQKICAgICAgICBzdGF0ZT1XRAog\
ICAgICAgIGNvdW50cnk9SVJMCiAgICAgICAgc3RvcmVwYXNzPWFuZHJvaWQKICAgICAgICBrZXlw\
YXNzPWFuZHJvaWQKICAgICAgdHlwZTogc3RyaW5nCiAgICAgIGRpc3BsYXlfdHlwZTogdGV4dGFy\
ZWEKICAgICAgZGVzY3JpcHRpb246ICJBbmRyb2lkIFNESyBjb25maWcgY29udGVudCIKICAgICAg\
dGl0bGU6IEFuZHJvaWQgU0RLIHBhY2thZ2UgY29uZmlnCiAgICAgIHJlcXVpcmVkOiBGYWxzZQog\
ICAgICB1cGRhdGFibGU6IFRydWUKICAgICAgZGlzcGxheV9ncm91cDogQW5kcm9pZCBTREsKICAg\
IC0gbmFtZTogQU5EUk9JRF9TREtfVk9MVU1FX1NJWkUKICAgICAgZGVmYXVsdDogIjEwR2kiCiAg\
ICAgIHR5cGU6IHN0cmluZwogICAgICBkZXNjcmlwdGlvbjogIlBsZWFzZSBzcGVjaWZ5IHRoZSB2\
b2x1bWUgc2l6ZSBmb3IgQW5kcm9pZCBTREsiCiAgICAgIHRpdGxlOiBWb2x1bWUgU2l6ZSBmb3Ig\
QW5kcm9pZCBTREsKICAgICAgcmVxdWlyZWQ6IEZhbHNlCiAgICAgIGRpc3BsYXlfZ3JvdXA6IEFu\
ZHJvaWQgU0RLCiAgICAtIG5hbWU6IEFORFJPSURfU0xBVkVfQ1BVX1JFUVVFU1QKICAgICAgZGVm\
YXVsdDogIjUwMG0iCiAgICAgIHR5cGU6IHN0cmluZwogICAgICBkZXNjcmlwdGlvbjogIlBsZWFz\
ZSBzcGVjaWZ5IHRoZSBDUFUgcmVzb3VyY2UgdG8gcmVxdWVzdCBmb3IgdGhlIEFuZHJvaWQgc2xh\
dmUgcG9kcyIKICAgICAgdGl0bGU6IENQVSByZXNvdXJjZSB0byByZXF1ZXN0IGZvciB0aGUgQW5k\
cm9pZCBzbGF2ZSBwb2RzCiAgICAgIHJlcXVpcmVkOiBGYWxzZQogICAgICBkaXNwbGF5X2dyb3Vw\
OiBBbmRyb2lkIFNsYXZlIFBvZHMKICAgIC0gbmFtZTogQU5EUk9JRF9TTEFWRV9DUFVfTElNSVQK\
ICAgICAgZGVmYXVsdDogIjIwMDBtIgogICAgICB0eXBlOiBzdHJpbmcKICAgICAgZGVzY3JpcHRp\
b246ICJQbGVhc2Ugc3BlY2lmeSB0aGUgQ1BVIHJlc291cmNlIGxpbWl0IGZvciB0aGUgQW5kcm9p\
ZCBzbGF2ZSBwb2RzIgogICAgICB0aXRsZTogQ1BVIHJlc291cmNlIGxpbWl0IGZvciB0aGUgQW5k\
cm9pZCBzbGF2ZSBwb2RzCiAgICAgIHJlcXVpcmVkOiBGYWxzZQogICAgICBkaXNwbGF5X2dyb3Vw\
OiBBbmRyb2lkIFNsYXZlIFBvZHMKICAgIC0gbmFtZTogQU5EUk9JRF9TTEFWRV9NRU1PUllfUkVR\
VUVTVAogICAgICBkZWZhdWx0OiAiNTAwTWkiCiAgICAgIHR5cGU6IHN0cmluZwogICAgICBkZXNj\
cmlwdGlvbjogIlBsZWFzZSBzcGVjaWZ5IHRoZSBtZW1vcnkgcmVzb3VyY2UgdG8gcmVxdWVzdCBm\
b3IgdGhlIEFuZHJvaWQgc2xhdmUgcG9kcyIKICAgICAgdGl0bGU6IE1lbW9yeSByZXNvdXJjZSB0\
byByZXF1ZXN0IGZvciB0aGUgQW5kcm9pZCBzbGF2ZSBwb2RzCiAgICAgIHJlcXVpcmVkOiBGYWxz\
ZQogICAgICBkaXNwbGF5X2dyb3VwOiBBbmRyb2lkIFNsYXZlIFBvZHMKICAgIC0gbmFtZTogQU5E\
Uk9JRF9TTEFWRV9NRU1PUllfTElNSVQKICAgICAgZGVmYXVsdDogIjMwMDBNaSIKICAgICAgdHlw\
ZTogc3RyaW5nCiAgICAgIGRlc2NyaXB0aW9uOiAiUGxlYXNlIHNwZWNpZnkgdGhlIG1lbW9yeSBy\
ZXNvdXJjZSBsaW1pdCBmb3IgdGhlIEFuZHJvaWQgc2xhdmUgcG9kcyIKICAgICAgdGl0bGU6IE1l\
bW9yeSByZXNvdXJjZSBsaW1pdCBmb3IgdGhlIEFuZHJvaWQgc2xhdmUgcG9kcwogICAgICByZXF1\
aXJlZDogRmFsc2UKICAgICAgZGlzcGxheV9ncm91cDogQW5kcm9pZCBTbGF2ZSBQb2RzCiAgICAt\
IG5hbWU6IEpFTktJTlNfVk9MVU1FX1NJWkUKICAgICAgZGVmYXVsdDogIjQwR2kiCiAgICAgIHR5\
cGU6IHN0cmluZwogICAgICBkZXNjcmlwdGlvbjogIlBsZWFzZSBzcGVjaWZ5IHRoZSB2b2x1bWUg\
c2l6ZSBmb3IgSmVua2lucyIKICAgICAgdGl0bGU6IFZvbHVtZSBTaXplIGZvciBKZW5raW5zCiAg\
ICAgIHJlcXVpcmVkOiBGYWxzZQogICAgICBkaXNwbGF5X2dyb3VwOiBKZW5raW5zCiAgICAK"

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
COPY vars /opt/ansible/vars
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
