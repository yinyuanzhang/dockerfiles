FROM ansibleplaybookbundle/apb-base:canary
MAINTAINER Ansible Playbook Bundle Community

LABEL "com.redhat.apb.spec"=\
"LS0tCgp2ZXJzaW9uOiAnMS4wJwpuYW1lOiBtYXJpYWRiLWFwYgpkZXNjcmlwdGlvbjogTWFyaWFk\
YiBhcGIgaW1wbGVtZW50YXRpb24KYmluZGFibGU6IHRydWUKYXN5bmM6IG9wdGlvbmFsCnRhZ3M6\
CiAgLSBkYXRhYmFzZQogIC0gbWFyaWFkYgptZXRhZGF0YToKICBkb2N1bWVudGF0aW9uVXJsOiAi\
aHR0cHM6Ly9tYXJpYWRiLmNvbS9rYi9lbi9tYXJpYWRiL2RvY3VtZW50YXRpb24vIgogIGxvbmdE\
ZXNjcmlwdGlvbjogIkRlcGxveXMgYSBiaW5kYWJsZSBtYXJpYWRiIGluc3RhbmNlIgogIGRlcGVu\
ZGVuY2llczoKICAgIC0gJ2RvY2tlci5pby9jZW50b3MvbWFyaWFkYi0xMDEtY2VudG9zNycKICAg\
IC0gJ2RvY2tlci5pby9jZW50b3MvbWFyaWFkYi0xMDItY2VudG9zNycKICBkaXNwbGF5TmFtZTog\
Ik1hcmlhREIgKEFQQikiCiAgY29uc29sZS5vcGVuc2hpZnQuaW8vaWNvbkNsYXNzOiBpY29uLW1h\
cmlhZGIKICBwcm92aWRlckRpc3BsYXlOYW1lOiAiUmVkIEhhdCwgSW5jLiIKcGxhbnM6CiAgLSBu\
YW1lOiBkZXYKICAgIGRlc2NyaXB0aW9uOgogICAgICBUaGlzIHBsYW4gZGVwbG95cyBhIHNpbmds\
ZSBNYXJpYURCIGluc3RhbmNlIHdpdGggZXBoZW1lcmFsIHN0b3JhZ2UKICAgIGZyZWU6IHRydWUK\
ICAgIGRlZmF1bHQ6IHRydWUKICAgIG1ldGFkYXRhOgogICAgICBkaXNwbGF5TmFtZTogRGV2ZWxv\
cG1lbnQKICAgICAgY29zdDogJDAuMDAKICAgIHBhcmFtZXRlcnM6CiAgICAgIC0gbmFtZTogbWFy\
aWFkYl9kYXRhYmFzZQogICAgICAgIGRlZmF1bHQ6IGFkbWluCiAgICAgICAgdHlwZTogc3RyaW5n\
CiAgICAgICAgZGVzY3JpcHRpb246IE1hcmlhREIgZGVmYXVsdCBkYXRhYmFzZSBuYW1lCiAgICAg\
ICAgdGl0bGU6IE1hcmlhREIgRGF0YWJhc2UgTmFtZQogICAgICAgIHBhdHRlcm46ICJeW2EtekEt\
WjAtOV9dKlthLXpBLVpfXStbYS16QS1aMC05X10qJCIKICAgICAgICByZXF1aXJlZDogdHJ1ZQog\
ICAgICAtIG5hbWU6IG1hcmlhZGJfcm9vdF9wYXNzd29yZAogICAgICAgIHR5cGU6IHN0cmluZwog\
ICAgICAgIGRpc3BsYXlfdHlwZTogcGFzc3dvcmQKICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAg\
ICAgIHRpdGxlOiBNYXJpYURCIFJvb3QgUGFzc3dvcmQKICAgICAgLSBuYW1lOiBtYXJpYWRiX3Vz\
ZXIKICAgICAgICBkZWZhdWx0OiBhZG1pbgogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIHBh\
dHRlcm46ICJeW2EtekEtWjAtOV9dKlthLXpBLVpfXStbYS16QS1aMC05X10qJCIKICAgICAgICBy\
ZXF1aXJlZDogdHJ1ZQogICAgICAgIHRpdGxlOiBNYXJpYURCIFVzZXIKICAgICAgLSBuYW1lOiBt\
YXJpYWRiX3Bhc3N3b3JkCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAgICAgcmVxdWlyZWQ6IHRy\
dWUKICAgICAgICBkaXNwbGF5X3R5cGU6IHBhc3N3b3JkCiAgICAgICAgdGl0bGU6IE1hcmlhREIg\
UGFzc3dvcmQKICAgICAgLSBuYW1lOiBtYXJpYWRiX3ZlcnNpb24KICAgICAgICBkZWZhdWx0OiAi\
MTAuMiIKICAgICAgICBlbnVtOiBbJzEwLjInLCAnMTAuMSddCiAgICAgICAgdHlwZTogZW51bQog\
ICAgICAgIHRpdGxlOiBNYXJpYURCIFZlcnNpb24KICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAg\
ICAgIHVwZGF0YWJsZTogdHJ1ZQogICAgdXBkYXRlc190bzoKICAgICAgLSBwcm9kCiAgLSBuYW1l\
OiBwcm9kCiAgICBkZXNjcmlwdGlvbjoKICAgICAgVGhpcyBwbGFuIGRlcGxveXMgYSBzaW5nbGUg\
TWFyaWFEQiBpbnN0YW5jZSB3aXRoIHBlcnNpc3RlbnQgc3RvcmFnZQogICAgZnJlZTogdHJ1ZQog\
ICAgbWV0YWRhdGE6CiAgICAgIGRpc3BsYXlOYW1lOiBQcm9kdWN0aW9uCiAgICAgIGNvc3Q6ICQw\
LjAwCiAgICBwYXJhbWV0ZXJzOgogICAgICAtIG5hbWU6IG1hcmlhZGJfZGF0YWJhc2UKICAgICAg\
ICBkZWZhdWx0OiBhZG1pbgogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAgIGRlc2NyaXB0aW9u\
OiBNYXJpYURCIGRlZmF1bHQgZGF0YWJhc2UgbmFtZQogICAgICAgIHRpdGxlOiBNYXJpYURCIERh\
dGFiYXNlIE5hbWUKICAgICAgICBwYXR0ZXJuOiAiXlthLXpBLVowLTlfXSpbYS16QS1aX10rW2Et\
ekEtWjAtOV9dKiQiCiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgLSBuYW1lOiBtYXJpYWRi\
X3Jvb3RfcGFzc3dvcmQKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICBkaXNwbGF5X3R5cGU6\
IHBhc3N3b3JkCiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgICB0aXRsZTogTWFyaWFEQiBS\
b290IFBhc3N3b3JkCiAgICAgIC0gbmFtZTogbWFyaWFkYl91c2VyCiAgICAgICAgZGVmYXVsdDog\
YWRtaW4KICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICBwYXR0ZXJuOiAiXlthLXpBLVowLTlf\
XSpbYS16QS1aX10rW2EtekEtWjAtOV9dKiQiCiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAg\
ICB0aXRsZTogTWFyaWFEQiBVc2VyCiAgICAgIC0gbmFtZTogbWFyaWFkYl9wYXNzd29yZAogICAg\
ICAgIHR5cGU6IHN0cmluZwogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgZGlzcGxheV90\
eXBlOiBwYXNzd29yZAogICAgICAgIHRpdGxlOiBNYXJpYURCIFBhc3N3b3JkCiAgICAgIC0gbmFt\
ZTogbWFyaWFkYl92ZXJzaW9uCiAgICAgICAgZGVmYXVsdDogIjEwLjIiCiAgICAgICAgZW51bTog\
WycxMC4yJywgJzEwLjEnXQogICAgICAgIHR5cGU6IGVudW0KICAgICAgICB0aXRsZTogTWFyaWFE\
QiBWZXJzaW9uCiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgICB1cGRhdGFibGU6IHRydWUK\
ICAgICAgLSBuYW1lOiBtYXJpYWRiX3ZvbHVtZV9zaXplCiAgICAgICAgdHlwZTogZW51bQogICAg\
ICAgIGRlZmF1bHQ6ICcxR2knCiAgICAgICAgZW51bTogWycxR2knLCAnNUdpJywgJzEwR2knXQog\
ICAgICAgIHRpdGxlOiBNYXJpYURCIFZvbHVtZSBTaXplCiAgICAgICAgcmVxdWlyZWQ6IHRydWUK\
ICAgIHVwZGF0ZXNfdG86CiAgICAgIC0gZGV2Cg=="


ADD playbooks /opt/apb/actions

# Add our role into the ansible roles dir
ADD . /opt/ansible/roles/mariadb-apb

RUN chmod -R g=u /opt/{ansible,apb}

USER apb
