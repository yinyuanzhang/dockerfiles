FROM ansibleplaybookbundle/apb-base:canary
MAINTAINER Ansible Playbook Bundle Community

LABEL "com.redhat.apb.spec"=\
"LS0tCgp2ZXJzaW9uOiAnMS4wJwpuYW1lOiBteXNxbC1hcGIKZGVzY3JpcHRpb246ICJTb2Z0d2Fy\
ZSBDb2xsZWN0aW9ucyBNeVNRTCBBUEIiCmJpbmRhYmxlOiB0cnVlCmFzeW5jOiBvcHRpb25hbAp0\
YWdzOgogIC0gZGF0YWJhc2UKICAtIG15c3FsCm1ldGFkYXRhOgogIGRpc3BsYXlOYW1lOiAiTXlT\
UUwgKEFQQikiCiAgbG9uZ0Rlc2NyaXB0aW9uOiAiQW4gQW5zaWJsZSBQbGF5Ym9vayBCdW5kbGUg\
KEFQQikgdGhhdCBkZXBsb3lzIE15U1FMIgogIGNvbnNvbGUub3BlbnNoaWZ0LmlvL2ljb25DbGFz\
czogaWNvbi1teXNxbC1kYXRhYmFzZQogIGRvY3VtZW50YXRpb25Vcmw6ICJodHRwczovL2dpdGh1\
Yi5jb20vc2Nsb3JnL215c3FsLWNvbnRhaW5lci8iCiAgZGVwZW5kZW5jaWVzOgogICAgLSAnZG9j\
a2VyLmlvL2NlbnRvcy9teXNxbC01Ny1jZW50b3M3JwogIHByb3ZpZGVyRGlzcGxheU5hbWU6ICJS\
ZWQgSGF0LCBJbmMuIgpwbGFuczoKICAtIG5hbWU6IGRldgogICAgZGVzY3JpcHRpb246IEEgTXlT\
UUwgc2VydmVyIHdpdGggZXBoZW1lcmFsIHN0b3JhZ2UKICAgIGZyZWU6IHRydWUKICAgIGRlZmF1\
bHQ6IHRydWUKICAgIG1ldGFkYXRhOgogICAgICBkaXNwbGF5TmFtZTogRGV2ZWxvcG1lbnQKICAg\
ICAgbG9uZ0Rlc2NyaXB0aW9uOgogICAgICAgIFRoaXMgcGxhbiBwcm92aWRlcyBhIHNpbmdsZSBu\
b24tSEEgTXlTUUwgc2VydmVyIHcvbyBwZXJzaXN0ZW50IHN0b3JhZ2UKICAgICAgY29zdDogJDAu\
MDAKICAgIHVwZGF0ZXNfdG86CiAgICAgIC0gcHJvZAogICAgcGFyYW1ldGVyczoKICAgICAgLSBu\
YW1lOiBteXNxbF92ZXJzaW9uCiAgICAgICAgZGVzY3JpcHRpb246IFZlcnNpb24gb2YgTXlTUUwg\
dG8gZGVwbG95CiAgICAgICAgdHlwZTogZW51bQogICAgICAgIGVudW06IFsiNS43Il0KICAgICAg\
ICBkZWZhdWx0OiAiNS43IgogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgdXBkYXRhYmxl\
OiB0cnVlCiAgICAgIC0gbmFtZTogbXlzcWxfZGF0YWJhc2UKICAgICAgICBkZXNjcmlwdGlvbjog\
VGhlIG5hbWUgb2YgdGhlIE15U1FMIGRhdGFiYXNlCiAgICAgICAgdHlwZTogc3RyaW5nCiAgICAg\
ICAgZGVmYXVsdDogZGV2ZWwKICAgICAgICBwYXR0ZXJuOiAiXlthLXpBLVowLTlfXSpbYS16QS1a\
X10rW2EtekEtWjAtOV9dKiQiCiAgICAgICAgcmVxdWlyZWQ6IHRydWUKICAgICAgLSBuYW1lOiBt\
eXNxbF91c2VyCiAgICAgICAgZGVzY3JpcHRpb246IFVzZXJuYW1lIHRoYXQgd2lsbCBiZSB1c2Vk\
IHRvIGNvbm5lY3QgdG8gTXlTUUwKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICBkZWZhdWx0\
OiBkZXZlbAogICAgICAgIHBhdHRlcm46ICJeW2EtekEtWjAtOV9dKlthLXpBLVpfXStbYS16QS1a\
MC05X10qJCIKICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAtIG5hbWU6IG15c3FsX3Bhc3N3\
b3JkCiAgICAgICAgZGVzY3JpcHRpb246IFBhc3N3b3JkIHRvIGNvbm5lY3QgdG8gTXlTUUwKICAg\
ICAgICB0eXBlOiBzdHJpbmcKICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAgIGRpc3BsYXlf\
dHlwZTogcGFzc3dvcmQKICAtIG5hbWU6IHByb2QKICAgIGRlc2NyaXB0aW9uOiBBIE15U1FMIHNl\
cnZlciB3aXRoIHBlcnNpc3RlbnQgc3RvcmFnZQogICAgZnJlZTogZmFsc2UKICAgIG1ldGFkYXRh\
OgogICAgICBkaXNwbGF5TmFtZTogUHJvZHVjdGlvbgogICAgICBsb25nRGVzY3JpcHRpb246CiAg\
ICAgICAgVGhpcyBwbGFuIHByb3ZpZGVzIGEgc2luZ2xlIG5vbi1IQSBNeVNRTCBzZXJ2ZXIgd2l0\
aCBwZXJzaXN0ZW50IHN0b3JhZ2UKICAgICAgY29zdDogJDUuOTkgbW9udGhseQogICAgcGFyYW1l\
dGVyczoKICAgICAgLSBuYW1lOiBteXNxbF92ZXJzaW9uCiAgICAgICAgZGVzY3JpcHRpb246IFZl\
cnNpb24gb2YgTXlTUUwgdG8gZGVwbG95CiAgICAgICAgdHlwZTogZW51bQogICAgICAgIGVudW06\
IFsiNS43Il0KICAgICAgICBkZWZhdWx0OiAiNS43IgogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAg\
ICAgICAgdXBkYXRhYmxlOiB0cnVlCiAgICAgIC0gbmFtZTogbXlzcWxfZGF0YWJhc2UKICAgICAg\
ICBkZXNjcmlwdGlvbjogVGhlIG5hbWUgb2YgdGhlIE15U1FMIGRhdGFiYXNlCiAgICAgICAgdHlw\
ZTogc3RyaW5nCiAgICAgICAgZGVmYXVsdDogZGV2ZWwKICAgICAgICBwYXR0ZXJuOiAiXlthLXpB\
LVowLTlfXSpbYS16QS1aX10rW2EtekEtWjAtOV9dKiQiCiAgICAgICAgcmVxdWlyZWQ6IHRydWUK\
ICAgICAgLSBuYW1lOiBteXNxbF91c2VyCiAgICAgICAgZGVzY3JpcHRpb246IFVzZXJuYW1lIHRo\
YXQgd2lsbCBiZSB1c2VkIHRvIGNvbm5lY3QgdG8gTXlTUUwKICAgICAgICB0eXBlOiBzdHJpbmcK\
ICAgICAgICBkZWZhdWx0OiBkZXZlbAogICAgICAgIHBhdHRlcm46ICJeW2EtekEtWjAtOV9dKlth\
LXpBLVpfXStbYS16QS1aMC05X10qJCIKICAgICAgICByZXF1aXJlZDogdHJ1ZQogICAgICAtIG5h\
bWU6IG15c3FsX3Bhc3N3b3JkCiAgICAgICAgZGVzY3JpcHRpb246IFBhc3N3b3JkIHRvIGNvbm5l\
Y3QgdG8gTXlTUUwKICAgICAgICB0eXBlOiBzdHJpbmcKICAgICAgICByZXF1aXJlZDogdHJ1ZQog\
ICAgICAgIGRpc3BsYXlfdHlwZTogcGFzc3dvcmQKICAgICAgLSBuYW1lOiB2b2x1bWVfc2l6ZQog\
ICAgICAgIHR5cGU6IGVudW0KICAgICAgICBkZWZhdWx0OiAnMUdpJwogICAgICAgIGVudW06IFsn\
MUdpJywgJzVHaScsICcxMEdpJ10KICAgICAgICB0aXRsZTogTXlTUUwgVm9sdW1lIFNpemUKICAg\
ICAgICByZXF1aXJlZDogdHJ1ZQogICAgdXBkYXRlc190bzoKICAgICAgLSBkZXYK"


ADD playbooks /opt/apb/actions

# Add our role into the ansible roles dir
ADD . /opt/ansible/roles/mysql-apb

RUN chmod -R g=u /opt/{ansible,apb}

USER apb
