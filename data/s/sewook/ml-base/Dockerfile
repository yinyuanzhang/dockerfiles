# Start from ubuntu-basic
FROM sewook/ubuntu-basic

ARG ANACONDA_VERSION=5.0.1-Linux-x86_64
ARG JUPYTER_NOTEBOOK_PORT=8888

# Anaconda installing
RUN wget https://repo.continuum.io/archive/Anaconda3-$ANACONDA_VERSION.sh
RUN bash Anaconda3-$ANACONDA_VERSION.sh -b
RUN rm Anaconda3-$ANACONDA_VERSION.sh

# Set path to conda
ENV PATH /home/ubuntu/anaconda3/bin:$PATH

# Updating Anaconda packages
RUN conda update conda
RUN conda update anaconda
RUN conda update --all

# Configuring access to Jupyter
RUN mkdir /home/ubuntu/notebooks
RUN jupyter notebook --generate-config --allow-root
RUN echo "# GENERATED BY DOCKERFILE" >> /home/ubuntu/.jupyter/jupyter_notebook_config.py
#RUN echo "c.NotebookApp.password = u'sha1:6a3f528eec40:6e896b6e4828f525a6e20e5411cd1c8075d68619'" >> /home/ubuntu/.jupyter/jupyter_notebook_config.py
RUN echo "c.NotebookApp.ip = '0.0.0.0'" >> /home/ubuntu/.jupyter/jupyter_notebook_config.py

# Jupyter listens port
EXPOSE $JUPYTER_NOTEBOOK_PORT

# Install XGBoost
RUN pip install --upgrade xgboost

# Install graphviz
RUN sudo apt-get install -y graphviz
RUN pip install --upgrade graphviz

# Install tensorflow
RUN pip install --upgrade tensorflow
