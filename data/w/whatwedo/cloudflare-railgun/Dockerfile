
##################################################
#                                                #
# DO NOT EDIT THIS FILE MANUALLY                 #
# AUTOMATICALLY CREATED WITH docker-builder.sh   #
#                                                #
##################################################
  

FROM whatwedo/base:latest
RUN apt-get update -y && \
wget --quiet -O - https://pkg.cloudflare.com/pubkey.gpg | apt-key add - && \
echo "deb http://pkg.cloudflare.com/ trusty main" >> /etc/apt/sources.list && \
apt-get update -y && \
apt-get install -y railgun-stable && \
echo 'sed -i s/^memcached\.servers.*/memcached\.servers\ =\ ${MEMCACHED_SERVERS}/g /etc/railgun/railgun.conf' >> /bin/everyboot && \
echo 'sed -i s/^activation\.token.*/activation\.token\ =\ ${ACTIVATION_TOKEN}/g /etc/railgun/railgun.conf' >> /bin/everyboot && \
echo 'sed -i s/^activation\.railgun_host.*/activation\.railgun_host\ =\ ${ACTIVATION_RAILGUN_HOST}/g /etc/railgun/railgun.conf' >> /bin/everyboot && \
touch /var/log/railgun/panic.log
COPY files/supervisord/cloudflare-railgun.conf /etc/supervisor/conf.d/cloudflare-railgun.conf
RUN apt-get autoremove -y && \
apt-get clean -y && \
rm -rf /var/lib/apt/lists/* /tmp/* /var/tmp/*
EXPOSE 2408
EXPOSE 24088
LABEL ch.whatwedo.image.base="whatwedo/cloudflare-railgun"
