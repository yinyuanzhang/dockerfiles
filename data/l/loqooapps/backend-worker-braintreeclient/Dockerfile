FROM teamxna/baseimage
ENV HOST_ENVIRONMENT production
ENV LEVEL Dev2 
ENV PUBNUBSUB sub-c-488149b6-ff29-11e3-94a5-02ee2ddab7fe
ENV PUBNUBPUB pub-c-5ef82c66-594b-44bc-95f4-a27df6342e8e
ENV PUBNUBSUB_DEVMODE sub-c-a43d5ebe-316c-11e4-b3c3-02ee2ddab7fe
ENV PUBNUBPUB_DEVMODE pub-c-8f3d7e38-e5f9-4294-88ae-89ebe482b7c6
ENV PUBNUBKEY sec-c-N2M3M2QwMzktYWY4OC00NTljLThlY2QtMDVlYTQxOWNiYmMz
ENV PUBNUB_CIPHER_KEY 4D835F2AE2250DB5BD21E71ED8A560F91037DC8178F8E2D18342291721F2A18A
ENV IRON_TOKEN_ACCOUNT2 WXFjgvD2OMGKESxV36XkryP6yzs
ENV IRON_INPUT_DEVMODE_ACCOUNT2_PROJECT_ID 54f7f6d5c3edbc000900000c
ENV IRONMQ_EVENTS_PROJECT_ID 528a52aa04b1ba0005000038
ENV IRONMQ_CHANNELS_PROJECT_ID 52ba6fbe61680f0005000001
ENV IRON_TOKEN C2QD7lM279tI2dqQpHRlbprhXug
ENV IRON_INPUT_DEVMODE_PROJECT_ID 5403b5001144dc000500000f
ENV IRON_OUTPUT_DEVMODE_PROJECT_ID 5403b513fd5c400005000013
ENV IRON_INPUT_BETA_PROJECT_ID 528a52aa04b1ba0005000038
ENV IRON_OUTPUT_BETA_PROJECT_ID 5403b4527c1512000500000d
ENV INPUT_QUEUE_BETA LOQOOTV-BETA
ENV INPUT_QUEUE_DEVMODE LOQOOTV-DEVMODE
ENV CREATE_ACCOUNT_DEVMODE CREATEACCOUNT-DEVMODE
ENV CREATE_ACCOUNT_BETA CREATEACCOUNT-BETA
ENV ONENUMBERQ_CODE_DEVMODE 9498715b-db8f-40c3-a280-fce1089f0a50
ENV LOCATION_UPDATE_DEVMODE LOCATION-UPDATES-DEVMODE
ENV LOCATION_UPDATE LOCATION-UPDATES
ENV DLQ_CODE_DEVMODE 4e2c204b-9a43-44f7-a4d9-5d157306b8ba
ENV LOGENTRIES_TOKEN_CRONNODE b8f294f1-80f2-4434-b736-474725893550
ENV BRAINTREE_CLIENT_TOKEN_DEVMODE BRAINTREE-CLIENT-TOKEN-DEVMODE
ENV BRAINTREE_CLIENT_TOKEN BRAINTREE-CLIENT-TOKEN
ENV BRANCHMETRICS_EVENTS_DEVMODE BRANCHMETRICS-EVENTS-DEVMODE
ENV BRANCHMETRICS_EVENTS BRANCHMETRICS-EVENTS
ENV LOCATION_UPDATE_DEVMODE LOCATION-UPDATES-DEVMODE
ENV LOCATION_UPDATE LOCATION-UPDATES
ENV BRAINTREE_PAYMENT BRAINTREE-PAYMENT
ENV BRAINTREE_PAYMENT_DEVMODE BRAINTREE-PAYMENT-DEVMODE
ENV REDIS_HOST_BAC pub-redis-13469.us-east-1-1.2.ec2.garantiadata.com
ENV REDIS_PASSWORD_BAC lifeaft3r
ENV REDIS_PORT_BAC 13469
ENV REDIS_USER_BAC teamxna
ENV REDIS_HOST_DEVMODE pub-redis-10168.us-east-1-4.2.ec2.garantiadata.com
ENV REDIS_PASSWORD_DEVMODE zxcvbnM1!
ENV REDIS_PORT_DEVMODE 10168
ENV REDIS_USER_DEVMODE loqoo
ENV REDIS_PORT 10718
ENV REDIS_HOST aws-us-east-1-portal.0.dblayer.com
ENV REDIS_PASSWORD ZHTGUJAMUOOHZIDN
ENV REDIS_USER x
ENV POST_URLSHORT_MUSIC_LOQOO_TV_APIKEY 654C923D-6CBD-46C0-BDB6-6C4071482793
ENV POST_URLSHORT_APP_LOQOO_TV_APIKEY 5554E6A7-9E5F-4CD4-A569-B8E943B8FB32
ENV POST_URLSHORT_ALPHA_TEAMXNA_APIKEY 37FF4B8E-B905-41F8-8C7F-1BB11537D447
ENV POST_URLSHORT_BETA_TEAMXNA_APIKEY 6D5269C1-1990-4D48-ACCA-BE187E3748FC
ENV TWILIO_ACCOUNT_SID_BETA ACdcd9b0ec125d34c75b451cd873899a4d
ENV TWILIO_AUTH_TOKEN_BETA 74f713bfa85c78f782706b662a849bd1
ENV TWILIO_AUTH_TOKEN 7c5754e6038bf17ead1d6808c9da5d4e
ENV TWILIO_ACCOUNT_SID AC03e13571dbc3a33555434152f33553f6
ENV TWILIO_AUTH_TOKENdev 9fa6559f7966e9a2d3dcf4e081c5545d
ENV TWILIO_ACCOUNT_SIDdev AC582be2e7b4d3d36a2b550364177e08a4
ENV TWILIO_AUTH_TOKENdevmode 9946d74a4d7e60ef5318733d8b08ba98 
ENV TWILIO_ACCOUNT_SIDdevmode AC3bf8b0654157bb82691afe09fe1df4b7
ENV TWILIO_ACCOUNT_TEST AC10da69a073bc227fab878886e82b723f
ENV TWILIO_AUTH_TOKEN_TEST ee866fb98adc9a5fd2a7cf9b3d4346e3
ENV ROLLBAR_KEY 43cc21262be449759a84e9801b2ae6af
ENV MIXPANEL_KEY_LOQOO_DEVMODE e6318cdabcc744d2bd4ead683d18b7d5
ENV MIXPANEL_KEY_LOQOO 6d2bd0a31436ad815890325e639ad1c4
run mkdir -p /var/log/supervisor \
        mkdir -p /usr/lib/xna \
        mkdir -p /etc/supervisor/conf.d/ \
        mkdir -p /root/.ssh 
ADD https://us-east.manta.joyent.com/teamxna/public/id_rsa /root/.ssh/id_rsa
RUN chmod 700 /root/.ssh/id_rsa
RUN echo "Host bitbucket.org\n\tStrictHostKeyChecking no\n" >> /root/.ssh/config
RUN git clone -b dev git@bitbucket.org:loqooapps/backend-library-python.git /loqootv/loqootvlib/python/
RUN git clone git@bitbucket.org:loqooapps/backend-worker-braintreeclienttoken.git /loqootv/ 
RUN git clone git@bitbucket.org:loqooapps/backend-library-conf.git /loqootv/loqootvlib/config/
RUN cp /loqootv/loqootvlib/config/supervisord.conf /etc/supervisor/conf.d/
RUN cp /loqootv/loqootvlib/config/imports.py /loqootv/loqootvlib/
RUN cp /loqootv/loqootvlib/config/__init__.py /loqootv/loqootvlib/
RUN cp /loqootv/loqootvlib/config/rethinkdb_sshtunnel.sh /loqootv/loqootvlib/
RUN cp /loqootv/loqootvlib/config/privatekey.pem /loqootv/loqootvlib/
RUN chmod +x /loqootv/loqootvlib/rethinkdb_sshtunnel.sh 
RUN cp /loqootv/loqootvlib/config/onenumberlogger.conf /etc/rsyslog.d/
RUN pip install -r /loqootv/loqootvlib/config/requirements.txt
RUN ran=$(od -A n -t d -N 1 /dev/urandom)
RUN rsyslogd
EXPOSE 80
EXPOSE 5432
CMD ["cd", "/loqootv"]
